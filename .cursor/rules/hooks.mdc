---
description: "Standards for implementing and exporting custom hooks in this repository."
globs: src/hooks/**/*.ts,src/hooks/**/*.tsx
alwaysApply: true
---
# Custom Hooks Development Standards

## Scope
These standards apply to all custom hooks under `src/hooks/`.

## File Layout (recommended order)
1. Imports
2. Types and interfaces
3. Hook implementation
4. Exports

```typescript
import { useCallback, useMemo, useState } from "react"

type HookState<T> = {
  data: T | null
  loading: boolean
  error: Error | null
}

type HookOptions<T> = {
  initialValue?: T
  onError?: (error: Error) => void
}

const useThing = <T>(options?: HookOptions<T>) => {
  const [state, setState] = useState<HookState<T>>({
    data: null,
    loading: false,
    error: null,
  })

  const setLoading = useCallback(() => {
    setState((prev) => ({ ...prev, loading: true }))
  }, [])

  const value = useMemo(() => state.data, [state.data])

  return { ...state, value, setLoading }
}

export { useThing }
export type { HookState, HookOptions }
```

## Types
- Prefer explicit types; avoid `any`.
- Use generics for data and results.
- Name types with `State`, `Options`, `Result` suffixes.

## State Management
- Prefer a single state object for related values.
- Use functional updates (`setState((prev) => ...)`).

## Async Effects
- Guard against updates after unmount (cancellation flag).
- Normalize unknown errors to `Error` before storing.

## Performance
- Use `useCallback` for stable handlers.
- Use `useMemo` for expensive derived values.
- Dependency arrays must be complete.

## Naming
- Hooks must start with `use`.
- Types: PascalCase. Variables/functions: camelCase. Constants: UPPER_CASE.

## Documentation
- Public hooks require JSDoc with `@param` and `@returns`.
- Keep examples short and focused.

## Exports
- Use named exports only.
- Export the hook and all public types.
- Re-export from `src/hooks/index.ts`.

## Review Checklist (short)
- Types are explicit and correct.
- Errors are handled and normalized.
- Tests exist for behavior.
- Performance and deps are considered.
- Docs are present for public hooks.
